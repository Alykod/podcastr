{"ast":null,"code":"import _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/kod/Desktop/podcastframework/podcastUI/pages/index.tsx\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/layout\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport PodcastContext from '../components/context/podcastContext';\n// import apollo, { withApollo } from '../lib/apollo'\n// import PodcastsList from '../components/apolloLayout';\nimport { useQuery } from '@apollo/react-hooks';\nimport PodcastCard from '../components/podcastCard';\nimport { PodcastsQuery } from '../services/query';\nimport _ from 'lodash'; // interface Podcasts {\n//   title: String,\n//   id: String,\n//   description: String,\n//   // image: ImageObject\n// }\n\nconst Index = () => {\n  const podcastContext = useContext(PodcastContext);\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(PodcastsQuery);\n  const {\n    0: loadingStatus,\n    1: setLoadingStatus\n  } = useState(loading);\n  const {\n    0: podcastData,\n    1: setPodcastData\n  } = useState(null);\n  console.log(\"data\", data); // useEffect(()=> {\n  //     if(podcastContext.podcastState.currentPodcast == \"\") {\n  //         podcastContext.updateCurrentPodcast('test')\n  //         // podcastContext.dispatch({type: UPDATE_CURRENT_PODCAST, value: 'test'})\n  //     }\n  // }, [])\n\n  useEffect(() => {\n    if (data && !_.isEqual(data.podcasts, podcastData)) {\n      setPodcastData(data);\n    }\n  }, [data]);\n  useEffect(() => {\n    setLoadingStatus(loading);\n  }, [loading]);\n\n  const handleCardsMapping = () => {\n    return podcastData && podcastData.podcasts.map(podcast => {\n      return __jsx(PodcastCard, _extends({\n        key: podcast.id\n      }, podcast, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }));\n    });\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      alignContent: 'space-between'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, handleCardsMapping()), __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Hello Next.js\"));\n}; //reason get initial props is not used in this situation, is due to the fact that it would not work with hooks. When react suspense is out, this might be updated. \n\n\nexport default Index;","map":{"version":3,"sources":["/Users/kod/Desktop/podcastframework/podcastUI/pages/index.tsx"],"names":["Layout","React","useContext","useEffect","useState","PodcastContext","useQuery","PodcastCard","PodcastsQuery","_","Index","podcastContext","data","loading","error","loadingStatus","setLoadingStatus","podcastData","setPodcastData","console","log","isEqual","podcasts","handleCardsMapping","map","podcast","id","display","flexDirection","justifyContent","alignContent"],"mappings":";;;AAEA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAsD,OAAtD;AACA,OAAOC,cAAP,MAA2B,sCAA3B;AAEA;AACA;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAAQC,aAAR,QAAgD,mBAAhD;AACA,OAAOC,CAAP,MAAc,QAAd,C,CAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,KAAK,GAAG,MAAM;AAChB,QAAMC,cAAc,GAAGT,UAAU,CAACG,cAAD,CAAjC;AACA,QAAM;AAAEO,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2BR,QAAQ,CAACE,aAAD,CAAzC;AACA,QAAM;AAAA,OAACO,aAAD;AAAA,OAAgBC;AAAhB,MAAoCZ,QAAQ,CAACS,OAAD,CAAlD;AACA,QAAM;AAAA,OAACI,WAAD;AAAA,OAAcC;AAAd,MAAgCd,QAAQ,CAAC,IAAD,CAA9C;AAEAe,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBR,IAApB,EANgB,CAShB;AACA;AACA;AACA;AACA;AACA;;AAEAT,EAAAA,SAAS,CAAC,MAAK;AACX,QAAGS,IAAI,IAAI,CAACH,CAAC,CAACY,OAAF,CAAUT,IAAI,CAACU,QAAf,EAAyBL,WAAzB,CAAZ,EAAmD;AAC/CC,MAAAA,cAAc,CAACN,IAAD,CAAd;AACH;AACJ,GAJQ,EAIN,CAACA,IAAD,CAJM,CAAT;AAMAT,EAAAA,SAAS,CAAC,MAAK;AACXa,IAAAA,gBAAgB,CAACH,OAAD,CAAhB;AACH,GAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;;AAKA,QAAMU,kBAAkB,GAAG,MAAM;AAChC,WAAQN,WAAW,IAAIA,WAAW,CAACK,QAAZ,CAAqBE,GAArB,CAA0BC,OAAD,IAAY;AAC1D,aAAO,MAAC,WAAD;AAAa,QAAA,GAAG,EAAEA,OAAO,CAACC;AAA1B,SAAkCD,OAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACA,KAFqB,CAAvB;AAGA,GAJD;;AAMF,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,KAAK,EAAE;AAACE,MAAAA,OAAO,EAAE,MAAV;AAAkBC,MAAAA,aAAa,EAAE,QAAjC;AAA2CC,MAAAA,cAAc,EAAE,eAA3D;AAA4EC,MAAAA,YAAY,EAAE;AAA1F,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCP,kBAAkB,EADnB,CADF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,CADF;AAUD,CA3CD,C,CA6CA;;;AAGA,eAAeb,KAAf","sourcesContent":["import Link from \"next/link\";\nimport Header from \"../components/header\";\nimport Layout from \"../components/layout\";\nimport React, { useContext, useEffect, useState} from \"react\";\nimport PodcastContext from '../components/context/podcastContext';\nimport {UPDATE_CURRENT_PODCAST} from '..//components/context/reducers'\n// import apollo, { withApollo } from '../lib/apollo'\n// import PodcastsList from '../components/apolloLayout';\nimport { useQuery } from '@apollo/react-hooks';\nimport PodcastCard from '../components/podcastCard'\nimport {PodcastsQuery, LatestPodcastQuery} from '../services/query';\nimport _ from 'lodash'\n\n// interface Podcasts {\n//   title: String,\n//   id: String,\n//   description: String,\n//   // image: ImageObject\n// }\n\nconst Index = () => {\n    const podcastContext = useContext(PodcastContext)\n    const { data, loading, error } = useQuery(PodcastsQuery);\n    const [loadingStatus, setLoadingStatus] = useState(loading);\n    const [podcastData, setPodcastData] = useState(null);\n\n    console.log(\"data\", data);\n\n\n    // useEffect(()=> {\n    //     if(podcastContext.podcastState.currentPodcast == \"\") {\n    //         podcastContext.updateCurrentPodcast('test')\n    //         // podcastContext.dispatch({type: UPDATE_CURRENT_PODCAST, value: 'test'})\n    //     }\n    // }, [])\n\n    useEffect(()=> {\n        if(data && !_.isEqual(data.podcasts, podcastData)) {\n            setPodcastData(data)\n        }\n    }, [data]);\n\n    useEffect(()=> {\n        setLoadingStatus(loading);\n    }, [loading])\n    \n\n    const handleCardsMapping = () => {\n     return  podcastData && podcastData.podcasts.map((podcast)=> {\n       return <PodcastCard key={podcast.id} {...podcast} />\n      })\n    }\n\n  return (\n    <Layout>\n      <div style={{display: 'flex', flexDirection: 'column', justifyContent: 'space-between', alignContent: 'space-between'}}>\n      {handleCardsMapping()}\n\n      </div>\n    {/* <PodcastsList /> */}\n      <p>Hello Next.js</p>\n    </Layout>\n  );\n};\n\n//reason get initial props is not used in this situation, is due to the fact that it would not work with hooks. When react suspense is out, this might be updated. \n\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}